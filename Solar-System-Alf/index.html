<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Improved Solar System with Spacetime Curvature (NASA Textures)</title>
  <style>
    body { margin: 0; overflow: hidden; background-color: #000; }
    canvas { display: block; } /* Prevent scroll bars */
    
    /* Menu container for all left menus */
    #menuContainer {
      position: absolute;
      left: 0;
      top: 10px;
      z-index: 1000;
      transition: transform 0.3s ease;
    }
    
    #menuContainer.collapsed {
      transform: translateX(-220px);
    }
    
    /* Toggle button for menus */
    #menuToggle {
      position: absolute;
      top: 50%;
      right: -22px;
      background: rgba(40, 40, 60, 0.9);
      color: white;
      border: 1px solid rgba(100, 100, 150, 0.8);
      border-radius: 0 5px 5px 0;
      width: 22px;
      height: 80px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1001;
      transform: translateY(-50%);
    }
    
    #menuToggle::after {
      content: "◀"; /* Left arrow by default (menu visible) */
      font-size: 14px;
    }
    
    #menuContainer.collapsed #menuToggle::after {
      content: "▶"; /* Right arrow when menu collapsed */
    }
    
    #controls {
      position: relative;
      margin: 0 0 10px 10px;
      color: white;
      font-family: Arial, sans-serif;
      background: rgba(0, 0, 0, 0.5);
      padding: 8px;
      border-radius: 5px;
      font-size: 0.9em;
      width: 220px; /* Fixed width */
    }
    #controls label { display: block; margin-bottom: 5px; }
    #controls input[type="range"] { vertical-align: middle; width: 100px; } /* Adjust range width */
    #controls span { display: inline-block; width: 35px; text-align: right; } /* Align values */
    
    /* Planet Navigation Dropdown */
    #planetNavContainer {
      position: relative;
      margin: 0 0 10px 10px;
      color: white;
      font-family: Arial, sans-serif;
      background: rgba(0, 0, 0, 0.7);
      padding: 8px 12px;
      border-radius: 5px;
      font-size: 0.9em;
      display: flex;
      flex-direction: column;
      width: 220px; /* Match controls width */
    }
    #planetNavContainer label {
      margin-bottom: 5px;
      font-weight: bold;
    }
    #planetNav {
      padding: 4px;
      background: rgba(30, 30, 40, 0.8);
      color: white;
      border: 1px solid rgba(100, 100, 120, 0.6);
      border-radius: 3px;
      cursor: pointer;
      width: 100%; /* Full width of container */
    }
    #planetNav option {
      background-color: rgba(20, 20, 30, 0.9);
    }
    
    /* Fixed size card for planet info */
    #info {
      position: absolute;
      bottom: 10px;
      left: 10px;
      color: white;
      font-family: Arial, sans-serif;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px;
      border-radius: 5px;
      display: none; /* Hidden by default */
      width: 280px; /* Fixed width */
      height: 320px; /* Fixed height */
      overflow-y: auto; /* Scroll if content exceeds height */
    }
    #info h3 { margin-top: 0; font-size: 1.1em; }
    #info p { margin: 5px 0; font-size: 0.9em; }
    
    /* Day counter - adjusted top position */
    #dayCounter {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 999;
      color: white;
      font-family: Arial, sans-serif;
      background: rgba(0, 0, 0, 0.5);
      padding: 8px;
      border-radius: 5px;
      font-size: 0.9em;
    }
    
    /* New control panel styles */
    #additionalControls {
      position: relative;
      margin: 0 0 10px 10px;
      color: white;
      font-family: Arial, sans-serif;
      background: rgba(0, 0, 0, 0.7);
      padding: 8px 12px;
      border-radius: 5px;
      font-size: 0.9em;
      display: flex;
      flex-direction: column;
      width: 220px;
    }
    
    .controlBtn {
      background: rgba(40, 40, 60, 0.8);
      color: white;
      border: 1px solid rgba(100, 100, 150, 0.6);
      border-radius: 3px;
      padding: 6px;
      margin: 3px 0;
      cursor: pointer;
      font-size: 0.9em;
    }
    
    .controlBtn:hover {
      background: rgba(60, 60, 90, 0.8);
    }
    
    .btnRow {
      display: flex;
      justify-content: space-between;
      margin: 3px 0;
    }
    
    .btnRow .controlBtn {
      flex: 1;
      margin: 0 2px;
    }
    
    .btnRow .controlBtn:first-child {
      margin-left: 0;
    }
    
    .btnRow .controlBtn:last-child {
      margin-right: 0;
    }
    
    /* Scale indicator */
    #scaleIndicator {
      position: absolute;
      top: 50px;
      right: 10px;
      color: white;
      font-family: Arial, sans-serif;
      background: rgba(0, 0, 0, 0.5);
      padding: 8px;
      border-radius: 5px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <!-- Menu container with toggle button -->
  <div id="menuContainer">
    <button id="menuToggle" aria-label="Toggle menu"></button>
    
    <div id="controls">
      <label>Speed: <input type="range" id="speedSlider" min="0.1" max="5" step="0.1" value="1"> <span id="speedValue">1.0x</span></label><br>
    </div>
    
    <!-- Planet Navigation Dropdown -->
    <div id="planetNavContainer">
      <label for="planetNav">Go to:</label>
      <select id="planetNav">
        <option value="">Select Planet</option>
        <option value="Sun">Sun</option>
        <option value="Mercury">Mercury</option>
        <option value="Venus">Venus</option>
        <option value="Earth">Earth</option>
        <option value="Mars">Mars</option>
        <option value="Jupiter">Jupiter</option>
        <option value="Saturn">Saturn</option>
        <option value="Uranus">Uranus</option>
        <option value="Neptune">Neptune</option>
        <!-- Add moon options -->
        <option value="Moon">Earth's Moon</option>
        <option value="Io">Io (Jupiter)</option>
        <option value="Europa">Europa (Jupiter)</option>
        <option value="Ganymede">Ganymede (Jupiter)</option>
        <option value="Callisto">Callisto (Jupiter)</option>
        <option value="Titan">Titan (Saturn)</option>
        <option value="Triton">Triton (Neptune)</option>
      </select>
    </div>
    
    <!-- Additional Controls -->
    <div id="additionalControls">
      <button id="resetCameraBtn" class="controlBtn">Reset Camera</button>
      <button id="toggleOrbitsBtn" class="controlBtn">Toggle Orbit Lines</button>
      <div class="btnRow">
        <button id="pauseBtn" class="controlBtn">Pause</button>
        <button id="playBtn" class="controlBtn">Play</button>
      </div>
      <div class="btnRow">
        <button id="slowDownBtn" class="controlBtn">÷2</button>
        <button id="speedUpBtn" class="controlBtn">×2</button>
      </div>
      <button id="toggleScaleBtn" class="controlBtn">Toggle Realistic Scale</button>
    </div>
  </div>
  
  <div id="info">
    <h3>Selected Planet</h3>
    <p>Name: <span id="info-name"></span></p>
    <p>Orbit: <span id="info-orbit"></span> AU</p>
    <p>Size: <span id="info-size"></span></p>
    <div id="info-details"></div>
  </div>
  
  <div id="dayCounter">Days: 0</div>
  
  <!-- Scale Indicator -->
  <div id="scaleIndicator">Scale: Enhanced Visibility</div>
  
  <!-- Textures sourced from SolarSystemScope.com (often derived from NASA/ESA data) -->
  <!-- For production, download and host these locally. -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="script.js"></script>
  
  <script>
    // Menu toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
      const menuContainer = document.getElementById('menuContainer');
      const menuToggle = document.getElementById('menuToggle');
      
      menuToggle.addEventListener('click', function() {
        menuContainer.classList.toggle('collapsed');
        // Save menu state to localStorage
        localStorage.setItem('menuCollapsed', menuContainer.classList.contains('collapsed'));
      });
      
      // Restore menu state from localStorage
      if (localStorage.getItem('menuCollapsed') === 'true') {
        menuContainer.classList.add('collapsed');
      }
    });
  </script>
</body>
</html>